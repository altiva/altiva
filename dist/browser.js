var Al=function(){"use strict";function e(e,n){var r,o,a=[],s={},i=s.format=function(e){return e?(e="/"+e.replace(/^\/|\/$/g,""),r.test(e)&&e.replace(r,"/")):e};return e="/"+(e||"").replace(/^\/|\/$/g,""),r="/"==e?/^\/+/:new RegExp("^\\"+e+"(?=\\/|$)\\/?","i"),s.route=function(t,n){"/"!=t[0]||r.test(t)||(t=e+t),history[(t===o||n?"replace":"push")+"State"](t,null,t)},s.on=function(e,t){return(e=function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,o,a,s=[],i="",c=e.split("/");for(c[0]||c.shift();o=c.shift();)"*"===(n=o[0])?(s.push("wild"),i+="/(.*)"):":"===n?(r=o.indexOf("?",1),a=o.indexOf(".",1),s.push(o.substring(1,~r?r:~a?a:o.length)),i+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(i+=(~r?"?":"")+"\\"+o.substring(a))):i+="/"+o;return{keys:s,pattern:new RegExp("^"+i+(t?"(?=$|/)":"/?$"),"i")}}(e)).fn=t,a.push(e),s},s.run=function(e){var t,r,c=0,l={};if(e=i(e||location.pathname)){for(e=e.match(/[^\?#]*/)[0],o=e;c<a.length;c++)if(t=(r=a[c]).pattern.exec(e)){for(c=0;c<r.keys.length;)l[r.keys[c]]=t[++c]||null;return r.fn(l),s}n&&n(e)}return s},s.listen=function(e){function n(e){s.run()}function o(e){var t=e.target.closest("a"),n=t&&t.getAttribute("href");e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button||e.defaultPrevented||n&&!t.target&&t.host===location.host&&"#"!=n[0]&&("/"!=n[0]||r.test(n))&&(e.preventDefault(),s.route(n))}return t("push"),t("replace"),addEventListener("popstate",n),addEventListener("replacestate",n),addEventListener("pushstate",n),addEventListener("click",o),s.unlisten=function(){removeEventListener("popstate",n),removeEventListener("replacestate",n),removeEventListener("pushstate",n),removeEventListener("click",o)},s.run(e)},s}function t(e,t){history[e]||(history[e]=e,t=history[e+="State"],history[e]=function(n){var r=new Event(e.toLowerCase());return r.uri=n,t.apply(this,arguments),dispatchEvent(r)})}const n={areas:{},component:{},load:e=>new Promise((t=>{if(n.component[e])return t(!0);const r=document.getElementsByTagName("head")[0],o=document.createElement("script");o.src=n.base+e+".js",o.onerror=o.onload=()=>{t(!0),r.removeChild(o)},r.appendChild(o)})),load_all(e){let t=[];for(const r of e)t.push(n.load(r));return Promise.all(t)},add_area(e){const t=n.routes[e],r={};for(const e in t)r[e]=n.component[t[e]];n.areas[e]=r},register(){for(const e in n.deps)n.nav.on(e,(async()=>(n.areas[e]||(await n.load_all(n.deps[e]),await n.add_area(e)),app.show(n.areas[e]))))},start(){n.nav=new e;const t=window&&(window.cordova||"file:"==window.location.protocol);n.base=(t?window.location.pathname.replace("/index.html",""):window.location.origin)+"/components/",n.register(),window.app=new App({target:document.body}),n.nav.listen(t?"/":void 0)}};return n}();
